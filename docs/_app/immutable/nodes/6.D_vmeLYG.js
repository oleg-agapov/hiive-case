import{G as le,H as ae,I as P,J as ne,s as K,r as O,i as k,g as d,w as L,e as v,x as N,b as $,d as T,h as E,j as y,z as I,a as S,f as j,t as R,l as Q,p as B}from"../chunks/scheduler.BZrT-oZZ.js";import{g as x,a as w,c as H,t as g,S as X,i as Y,b as A,d as D,m as M,e as U}from"../chunks/index.CT4JarYA.js";import{g as q,u as Z,o as ee,I as te,h as re,T as se,i as ce}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.vnuVGSdF.js";import"../chunks/entry.CwjD2Jaz.js";function oe(s,e){const l=e.token={};function t(a,c,f,_){if(e.token!==l)return;e.resolved=_;let u=e.ctx;f!==void 0&&(u=u.slice(),u[f]=_);const n=a&&(e.current=a)(u);let r=!1;e.block&&(e.blocks?e.blocks.forEach((m,o)=>{o!==c&&m&&(x(),w(m,1,1,()=>{e.blocks[o]===m&&(e.blocks[o]=null)}),H())}):e.block.d(1),n.c(),g(n,1),n.m(e.mount(),e.anchor),r=!0),e.block=n,e.blocks&&(e.blocks[c]=n),r&&ne()}if(le(s)){const a=ae();if(s.then(c=>{P(a),t(e.then,1,e.value,c),P(null)},c=>{if(P(a),t(e.catch,2,e.error,c),P(null),!e.hasCatch)throw c}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,s),!0;e.resolved=s}}function ue(s,e,l){const t=e.slice(),{resolved:a}=s;s.current===s.then&&(t[s.value]=a),s.current===s.catch&&(t[s.error]=a),s.block.p(t,l)}function F(s,e,l){const t=s.slice();return t[8]=e[l][0],t[9]=e[l][1],t}function V(s,e,l){const t=s.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function ie(s){let e,l,t=s[16].message+"",a;return{c(){e=L(`An error was encountered while loading project schema.

	`),l=v("pre"),a=L(t),this.h()},l(c){e=N(c,`An error was encountered while loading project schema.

	`),l=$(c,"PRE",{class:!0});var f=T(l);a=N(f,t),f.forEach(d),this.h()},h(){E(l,"class","px-4 py-2 bg-red-800 text-white")},m(c,f){k(c,e,f),k(c,l,f),y(l,a)},p:I,i:I,o:I,d(c){c&&(d(e),d(l))}}}function fe(s){let e,l,t,a=[],c=new Map,f,_=q(Object.entries(s[7]));const u=n=>n[8];for(let n=0;n<_.length;n+=1){let r=F(s,_,n),m=u(r);c.set(m,a[n]=J(m,r))}return{c(){e=v("section"),l=v("div"),t=v("ul");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=$(n,"SECTION",{});var r=T(e);l=$(r,"DIV",{});var m=T(l);t=$(m,"UL",{class:!0});var o=T(t);for(let p=0;p<a.length;p+=1)a[p].l(o);o.forEach(d),m.forEach(d),r.forEach(d),this.h()},h(){E(t,"class","list-none m-0 p-0 flex flex-col gap-1 mb-1")},m(n,r){k(n,e,r),y(e,l),y(l,t);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(t,null);f=!0},p(n,r){r&7&&(_=q(Object.entries(n[7])),x(),a=Z(a,r,u,1,n,_,c,t,ee,J,null,F),H())},i(n){if(!f){for(let r=0;r<_.length;r+=1)g(a[r]);f=!0}},o(n){for(let r=0;r<a.length;r+=1)w(a[r]);f=!1},d(n){n&&d(e);for(let r=0;r<a.length;r+=1)a[r].d()}}}function W(s){let e,l=[],t=new Map,a,c,f=q(Object.entries(s[9]));const _=u=>u[12];for(let u=0;u<f.length;u+=1){let n=V(s,f,u),r=_(n);t.set(r,l[u]=G(r,n))}return{c(){e=v("ul");for(let u=0;u<l.length;u+=1)l[u].c();a=S(),this.h()},l(u){e=$(u,"UL",{class:!0});var n=T(e);for(let r=0;r<l.length;r+=1)l[r].l(n);a=j(n),n.forEach(d),this.h()},h(){E(e,"class","list-none m-0 flex flex-col gap-1")},m(u,n){k(u,e,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);y(e,a),c=!0},p(u,n){n&5&&(f=q(Object.entries(u[9])),x(),l=Z(l,n,_,1,u,f,t,e,ee,G,a,V),H())},i(u){if(!c){for(let n=0;n<f.length;n+=1)g(l[n]);c=!0}},o(u){for(let n=0;n<l.length;n+=1)w(l[n]);c=!1},d(u){u&&d(e);for(let n=0;n<l.length;n+=1)l[n].d()}}}function z(s){let e,l;return e=new ce({props:{columns:s[13].columns,rowClass:"ml-6 "}}),{c(){A(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,a){M(e,t,a),l=!0},p:I,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function G(s,e){let l,t,a,c,f=e[12]+"",_,u,n,r,m,o;a=new te({props:{src:se,class:"text-gray-700 w-5 h-5 mr-1"}});function p(){return e[5](e[13])}let i=e[0]===e[13]&&z(e);return{key:s,first:null,c(){l=v("li"),t=v("button"),A(a.$$.fragment),c=S(),_=L(f),u=S(),i&&i.c(),n=O(),this.h()},l(h){l=$(h,"LI",{class:!0});var b=T(l);t=$(b,"BUTTON",{class:!0});var C=T(t);D(a.$$.fragment,C),c=j(C),_=N(C,f),C.forEach(d),b.forEach(d),u=j(h),i&&i.l(h),n=O(),this.h()},h(){E(t,"class","bg-gray-200 px-2 py-1 rounded flex w-full hover:bg-blue-200"),R(t,"bg-blue-200",e[0]===e[13]),E(l,"class","font-mono m-0 text-sm font-bold ml-3"),this.first=l},m(h,b){k(h,l,b),y(l,t),M(a,t,null),y(t,c),y(t,_),k(h,u,b),i&&i.m(h,b),k(h,n,b),r=!0,m||(o=Q(t,"click",p),m=!0)},p(h,b){e=h,(!r||b&5)&&R(t,"bg-blue-200",e[0]===e[13]),e[0]===e[13]?i?(i.p(e,b),b&1&&g(i,1)):(i=z(e),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(x(),w(i,1,1,()=>{i=null}),H())},i(h){r||(g(a.$$.fragment,h),g(i),r=!0)},o(h){w(a.$$.fragment,h),w(i),r=!1},d(h){h&&(d(l),d(u),d(n)),U(a),i&&i.d(h),m=!1,o()}}}function J(s,e){let l,t,a,c,f=e[8]+"",_,u,n,r,m,o;a=new te({props:{src:re,class:"text-white w-5 h-5 mr-1"}});function p(){return e[4](e[8])}let i=e[1]===e[8]&&W(e);return{key:s,first:null,c(){l=v("li"),t=v("button"),A(a.$$.fragment),c=S(),_=L(f),u=S(),i&&i.c(),n=O(),this.h()},l(h){l=$(h,"LI",{class:!0});var b=T(l);t=$(b,"BUTTON",{class:!0});var C=T(t);D(a.$$.fragment,C),c=j(C),_=N(C,f),C.forEach(d),b.forEach(d),u=j(h),i&&i.l(h),n=O(),this.h()},h(){E(t,"class","bg-gray-500 px-2 py-1 rounded font-bold flex w-full hover:bg-blue-500"),R(t,"bg-blue-500",e[1]===e[8]),E(l,"class","font-mono m-0 text-sm text-white"),this.first=l},m(h,b){k(h,l,b),y(l,t),M(a,t,null),y(t,c),y(t,_),k(h,u,b),i&&i.m(h,b),k(h,n,b),r=!0,m||(o=Q(t,"click",p),m=!0)},p(h,b){e=h,(!r||b&6)&&R(t,"bg-blue-500",e[1]===e[8]),e[1]===e[8]?i?(i.p(e,b),b&2&&g(i,1)):(i=W(e),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(x(),w(i,1,1,()=>{i=null}),H())},i(h){r||(g(a.$$.fragment,h),g(i),r=!0)},o(h){w(a.$$.fragment,h),w(i),r=!1},d(h){h&&(d(l),d(u),d(n)),U(a),i&&i.d(h),m=!1,o()}}}function he(s){let e;return{c(){e=L("Loading Schema Information...")},l(l){e=N(l,"Loading Schema Information...")},m(l,t){k(l,e,t)},p:I,i:I,o:I,d(l){l&&d(e)}}}function _e(s){let e,l,t={ctx:s,current:null,token:null,hasCatch:!0,pending:he,then:fe,catch:ie,value:7,error:16,blocks:[,,,]};return oe(s[2](),t),{c(){e=O(),t.block.c()},l(a){e=O(),t.block.l(a)},m(a,c){k(a,e,c),t.block.m(a,t.anchor=c),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(a,[c]){s=a,ue(t,s,c)},i(a){l||(g(t.block),l=!0)},o(a){for(let c=0;c<3;c+=1){const f=t.blocks[c];w(f)}l=!1},d(a){a&&d(e),t.block.d(a),t.token=null,t=null}}}function me(s,e,l){let{data:t}=e,{__db:a}=t;async function c(){const r=await a.query("SELECT * FROM information_schema.tables WHERE table_catalog = 'memory' AND table_name != 'stats'"),m={};return await Promise.all(r.map(async o=>{const p=await a.query(`SELECT * FROM information_schema.columns WHERE table_name = '${o.table_name}' AND table_schema = '${o.table_schema}'`);m[o.table_schema]||(m[o.table_schema]={}),m[o.table_schema][o.table_name]={table:o,columns:p}})),m}let f="",_="";const u=r=>{l(1,_=_===r?"":r),l(0,f="")},n=r=>{l(0,f=f===r?"":r)};return s.$$set=r=>{"data"in r&&l(3,t=r.data)},[f,_,c,t,u,n]}class de extends X{constructor(e){super(),Y(this,e,me,_e,K,{data:3})}}function be(s){let e,l="Project Schema",t,a,c="This page details the tables and columns that are currently loaded in your project.",f,_,u="Sources",n,r,m;return r=new de({props:{data:s[0]}}),{c(){e=v("h1"),e.textContent=l,t=S(),a=v("p"),a.textContent=c,f=S(),_=v("h2"),_.textContent=u,n=S(),A(r.$$.fragment),this.h()},l(o){e=$(o,"H1",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-15777oi"&&(e.textContent=l),t=j(o),a=$(o,"P",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-ak948l"&&(a.textContent=c),f=j(o),_=$(o,"H2",{class:!0,"data-svelte-h":!0}),B(_)!=="svelte-9qt1ro"&&(_.textContent=u),n=j(o),D(r.$$.fragment,o),this.h()},h(){E(e,"class","markdown"),E(a,"class","markdown"),E(_,"class","markdown")},m(o,p){k(o,e,p),k(o,t,p),k(o,a,p),k(o,f,p),k(o,_,p),k(o,n,p),M(r,o,p),m=!0},p(o,[p]){const i={};p&1&&(i.data=o[0]),r.$set(i)},i(o){m||(g(r.$$.fragment,o),m=!0)},o(o){w(r.$$.fragment,o),m=!1},d(o){o&&(d(e),d(t),d(a),d(f),d(_),d(n)),U(r,o)}}}function pe(s,e,l){let{data:t}=e;return s.$$set=a=>{"data"in a&&l(0,t=a.data)},[t]}class we extends X{constructor(e){super(),Y(this,e,pe,be,K,{data:0})}}export{we as component};
